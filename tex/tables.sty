\ProvidesPackage{tables}[2025/10/30 OSDP table helpers]

\RequirePackage{array}
\RequirePackage{xcolor}
\RequirePackage{colortbl}
\RequirePackage{caption}

\captionsetup[table]{font={bf,Large},labelfont={bf,Large},skip=1.2em}

\definecolor{PacketHeaderBg}{HTML}{101010}
\definecolor{PacketHeaderFg}{HTML}{FFFFFF}

\newlength{\PacketSizeCol}\setlength{\PacketSizeCol}{0.16\linewidth}
\newlength{\PacketNameCol}\setlength{\PacketNameCol}{0.26\linewidth}
\newlength{\PacketMeaningCol}\setlength{\PacketMeaningCol}{0.38\linewidth}
\newlength{\PacketValueCol}\setlength{\PacketValueCol}{0.20\linewidth}

\newcolumntype{S}{>{\centering\arraybackslash}m{\PacketSizeCol}}
\newcolumntype{N}{>{\raggedright\arraybackslash}m{\PacketNameCol}}
\newcolumntype{M}{>{\raggedright\arraybackslash}m{\PacketMeaningCol}}
\newcolumntype{V}{>{\raggedright\arraybackslash}m{\PacketValueCol}}

\newenvironment{PacketTable}[1]{%
  \setlength{\tabcolsep}{6pt}%
  \renewcommand{\arraystretch}{1.35}%
  \begin{samepage}%
  \begin{center}
    \captionsetup{type=table}%
    \captionof{table}{#1}
    \begin{tabular}{|S|N|M|V|}
      \hline
      \rowcolor{PacketHeaderBg}
      \textcolor{PacketHeaderFg}{\bfseries Size (bytes)} &
      \textcolor{PacketHeaderFg}{\bfseries Name} &
      \textcolor{PacketHeaderFg}{\bfseries Meaning} &
      \textcolor{PacketHeaderFg}{\bfseries Value} \\\hline
}{%
    \end{tabular}
  \end{center}
  \end{samepage}
}

\newcommand{\PacketRow}[4]{
  #1 & #2 & #3 & #4 \\\hline}

\endinput
